[workspace]
name = "poly-tri"
version = "0.0"
description = "triangolosierer"
channels = ["conda-forge"]
platforms = ["linux-64", "osx-64", "osx-arm64", "win-64"]

[dependencies]
python = ">=3.8"
numpy = "*"
matplotlib = "*"
pytest  = "*"
compilers = "*"
git = "*"
openssl = "*"
pkg-config = "*"
rust-src = "*"
maturin = "*"
rust = "*"
pip = "*"
pylint = "*"

[target.linux.dependencies]
clang = "*"
compilers = "*"
make = "*"

[target.win-64.dependencies]
vs2017_win-64 = "*"

[tasks]
test = "python -m pytest tests/ || python tests/test.py"
speedtest = "python tests/speedtest.py"
lint = "python -m pylint polytri.py || echo 'pylint not installed'"
build-debug = "cd rust && maturin develop --features python"
build = "cd rust && maturin develop --release --features python"
check = "cd rust && cargo check"
test-rust = "cd rust && cargo test"
fmt = "cd rust && cargo fmt"
lint-rust = "cd rust && cargo clippy"
clean = "cd rust && cargo clean && rm -rf target/ dist/ *.egg-info"

[activation]
env.CARGO_TARGET_DIR = "rust/target/pixi"
env.PYO3_USE_ABI3_FORWARD_COMPATIBILITY = "1"
